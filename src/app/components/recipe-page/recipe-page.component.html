<head>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous"
  />
</head>
<app-nav-bar></app-nav-bar>

<div class="container">
  <h1 class="recipe-name">
    <b>{{ recipe?.name }}</b>
  </h1>
  <div class="row">
    <img
      [src]="recipe?.mainPhoto"
      class="photos shadow-1-strong rounded img-fluid"
    />
    <div class="recipe-details">
      <h3 class="text-muted">Category: {{ category?.name }}</h3>
      <hr class="hr hr-blurry" />
      <h3 class="text-muted">Difficulty: {{ recipe?.difficulty }}</h3>
      <hr class="hr hr-blurry" />
      <h3 class="text-muted">
        Preparation time: {{ recipe?.preparationTime }} Minutes
      </h3>
      <hr class="hr hr-blurry" />
      <h3 class="text-muted">Serves: {{ recipe?.serves }}</h3>
      <hr class="hr hr-blurry" />
      <h3 class="text-muted">
        Created by: <b (click)="goToUser()">{{ owner?.username! }}</b>
      </h3>
    </div>
  </div>

  <div>
    <h4>
      <em>{{ recipe?.description }}</em>
    </h4>
  </div>

  <mat-tab-group>
    <mat-tab label="Ingredients">
      <div *ngFor="let ingredient of ingredients">
        <p><input type="checkbox" style="margin-right:1vh">
          {{ ingredient.quantity }} {{ ingredient.measurement }}
          {{ ingredient.ingredientsName }}
        </p>
        <hr class="hr hr-blurry" />
      </div>
    </mat-tab>
    <mat-tab label="Steps">
      <div *ngFor="let step of steps; let index = index">
        <h4>Step {{ index }}</h4>
        <p> <input type="checkbox" style="margin-right:1vh">{{ step.description }}</p>
        <hr class="hr hr-blurry" style="height: 5vh" />
      </div>
    </mat-tab>
    <mat-tab label="Galery">
      <div>
        <img
          *ngFor="let photo of photos"
          [src]="photo.image"
          class="img-fluid rounded single-image"
        />
      </div>
    </mat-tab>
    <mat-tab label="Comments">
      <div>
        <button
          (click)="addComment()"
          class="rounded btn btn-primary btn-floating add-comment-button"
        >
          Add a comment
        </button>
        <div *ngFor="let review of userReview">
          <ngb-rating [rate]="review.rating"></ngb-rating>
          <p>{{ review.comment }}</p>
          <p (click)="goToUserFromComment(review.userId)">
            By : {{ review.username }}
            <i
              *ngIf="currentUser?.userId == review.userId"
              (click)="deleteComment(review)"
              class="fas fa-trash fa-xs delete-button"
              style="margin-left: 1vh; cursor: pointer"
            ></i>
          </p>
          <hr class="hr hr-blurry" />
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
